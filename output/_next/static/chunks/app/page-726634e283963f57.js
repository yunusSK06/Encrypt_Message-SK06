(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3775:(e,t,a)=>{Promise.resolve().then(a.bind(a,7623))},7623:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>Y});var r=a(5155),s=a(5565),l=a(2115),i=a(8914),n=a(3463),c=a(9795);function d(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,c.QP)((0,n.$)(t))}let o=i.bL,h=l.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(i.B8,{ref:t,className:d("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",a),...s})});h.displayName=i.B8.displayName;let m=l.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(i.l9,{ref:t,className:d("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",a),...s})});m.displayName=i.l9.displayName;let u=l.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)(i.UC,{ref:t,className:d("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",a),...s})});u.displayName=i.UC.displayName;let x="lock-chat-users",g="lock-chat-current-user";function p(){let e=localStorage.getItem(x);return e?JSON.parse(e):[]}let b=(0,l.createContext)(void 0);function y(e){let{children:t}=e,[a,s]=(0,l.useState)(null),[i,n]=(0,l.useState)(!0);(0,l.useEffect)(()=>{try{{localStorage.getItem(x)||localStorage.setItem(x,JSON.stringify([]));let e=function(){let e=localStorage.getItem(g);return e?JSON.parse(e):null}();e&&s(e)}}catch(e){console.error("Error initializing auth:",e)}finally{n(!1)}},[]);let c=async(e,t)=>{try{let a=function(e,t){let a=p().find(a=>a.email===e&&a.password===t);return a?(localStorage.setItem(g,JSON.stringify(a)),a):null}(e,t);if(a)return s(a),!0;return!1}catch(e){return console.error("Login error:",e),!1}},d=async(e,t,a)=>{try{return function(e,t,a){let r=p();return!r.some(t=>t.email===e)&&(r.push({email:e,name:t,password:a}),localStorage.setItem(x,JSON.stringify(r)),!0)}(e,t,a)}catch(e){return console.error("Registration error:",e),!1}};return(0,r.jsx)(b.Provider,{value:{user:a,isLoggedIn:null!==a,isLoading:i,loginUser:c,registerUser:d,logoutUser:()=>{localStorage.removeItem(g),s(null)}},children:t})}function f(){let e=(0,l.useContext)(b);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}let v=l.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:d("rounded-xl border bg-card text-card-foreground shadow",a),...s})});v.displayName="Card";let w=l.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:d("flex flex-col space-y-1.5 p-6",a),...s})});w.displayName="CardHeader";let j=l.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:d("font-semibold leading-none tracking-tight",a),...s})});j.displayName="CardTitle";let N=l.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:d("text-sm text-muted-foreground",a),...s})});N.displayName="CardDescription";let k=l.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:d("p-6 pt-0",a),...s})});k.displayName="CardContent";let S=l.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:d("flex items-center p-6 pt-0",a),...s})});S.displayName="CardFooter";var P=a(2317),C=a(1027);let I=(0,C.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),_=l.forwardRef((e,t)=>{let{className:a,variant:s,size:l,asChild:i=!1,...n}=e,c=i?P.DX:"button";return(0,r.jsx)(c,{className:d(I({variant:s,size:l,className:a})),ref:t,...n})});_.displayName="Button";let z=l.forwardRef((e,t)=>{let{className:a,type:s,...l}=e;return(0,r.jsx)("input",{type:s,className:d("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...l})});z.displayName="Input";let T=(0,C.F)("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),E=l.forwardRef((e,t)=>{let{className:a,variant:s,...l}=e;return(0,r.jsx)("div",{ref:t,role:"alert",className:d(T({variant:s}),a),...l})});E.displayName="Alert",l.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("h5",{ref:t,className:d("mb-1 font-medium leading-none tracking-tight",a),...s})}).displayName="AlertTitle";let R=l.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("div",{ref:t,className:d("text-sm [&_p]:leading-relaxed",a),...s})});R.displayName="AlertDescription";var A=a(814),M=a(420);function F(){let{loginUser:e,registerUser:t}=f(),[a,i]=(0,l.useState)("login"),[n,c]=(0,l.useState)(""),[d,x]=(0,l.useState)(""),[g,p]=(0,l.useState)(""),[b,y]=(0,l.useState)(!1),[P,C]=(0,l.useState)(""),[I,T]=(0,l.useState)(""),[F,D]=(0,l.useState)(""),[H,L]=(0,l.useState)(""),[U,O]=(0,l.useState)(""),[B,V]=(0,l.useState)(!1),W=async t=>{if(t.preventDefault(),p(""),!n||!d){p("Please enter both email and password");return}y(!0);try{await e(n,d)||p("Invalid email or password")}catch(e){p("An error occurred during login"),console.error(e)}finally{y(!1)}},K=async e=>{if(e.preventDefault(),O(""),!P||!I||!F){O("Please fill in all fields");return}if(F.length<8){O("Password must be at least 8 characters long");return}if(F!==H){O("Passwords do not match");return}V(!0);try{await t(P,I,F)?(A.o.success("Registration successful! Please log in."),i("login"),C(""),T(""),D(""),L("")):O("Email already exists")}catch(e){O("An error occurred during registration"),console.error(e)}finally{V(!1)}};return(0,r.jsx)("div",{className:"container flex flex-col items-center justify-center min-h-screen p-4",children:(0,r.jsxs)(M.P.div,{className:"w-full max-w-md space-y-8",initial:{opacity:0,y:-30},animate:{opacity:1,y:0},transition:{duration:.6},children:[(0,r.jsxs)(M.P.div,{className:"flex flex-col items-center space-y-4 text-center",animate:{scale:[.9,1.05,1]},transition:{duration:.8,times:[0,.7,1]},children:[(0,r.jsx)(M.P.div,{whileHover:{scale:1.1,rotate:5},transition:{type:"spring",stiffness:500},children:(0,r.jsx)(s.default,{src:"/images/verified-icon.png",alt:"Authentic Chat Logo",width:100,height:100,className:"drop-shadow-[0_0_15px_rgba(255,255,255,0.5)]"})}),(0,r.jsx)("h1",{className:"text-4xl font-bold text-white",children:"Authentic Chat"}),(0,r.jsx)(M.P.p,{className:"text-gray-300 max-w-xs",initial:{opacity:0},animate:{opacity:1},transition:{delay:.5,duration:.5},children:"Secure messaging with quantum key distribution simulation"})]}),(0,r.jsx)(M.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3,duration:.6},children:(0,r.jsxs)(v,{className:"w-full bg-black/90 text-white border-white/20 backdrop-blur-sm shadow-[0_0_15px_rgba(255,255,255,0.1)]",children:[(0,r.jsxs)(w,{children:[(0,r.jsx)(j,{className:"text-center text-white",children:"Welcome"}),(0,r.jsx)(N,{className:"text-center text-gray-400",children:"Sign in to your account or create a new one"})]}),(0,r.jsx)(k,{children:(0,r.jsxs)(o,{value:a,onValueChange:i,className:"w-full",children:[(0,r.jsxs)(h,{className:"grid w-full grid-cols-2 mb-4 bg-zinc-900/80",children:[(0,r.jsx)(m,{value:"login",className:"text-gray-300 data-[state=active]:bg-white data-[state=active]:text-black",children:"Login"}),(0,r.jsx)(m,{value:"register",className:"text-gray-300 data-[state=active]:bg-white data-[state=active]:text-black",children:"Register"})]}),(0,r.jsx)(u,{value:"login",children:(0,r.jsxs)("form",{onSubmit:W,className:"space-y-4",children:[g&&(0,r.jsx)(E,{variant:"destructive",className:"bg-red-900/40 border-red-500 text-red-200",children:(0,r.jsx)(R,{children:g})}),(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsx)(z,{id:"login-email",type:"email",placeholder:"Email",value:n,onChange:e=>c(e.target.value),className:"bg-zinc-900/80 border-white/20 placeholder:text-gray-500 text-white"})}),(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsx)(z,{id:"login-password",type:"password",placeholder:"Password",value:d,onChange:e=>x(e.target.value),className:"bg-zinc-900/80 border-white/20 placeholder:text-gray-500 text-white"})}),(0,r.jsx)(M.P.div,{whileHover:{scale:1.03},whileTap:{scale:.97},children:(0,r.jsx)(_,{type:"submit",className:"w-full bg-white text-black hover:bg-gray-200",disabled:b,children:b?"Logging in...":"Login"})})]})}),(0,r.jsx)(u,{value:"register",children:(0,r.jsxs)("form",{onSubmit:K,className:"space-y-4",children:[U&&(0,r.jsx)(E,{variant:"destructive",className:"bg-red-900/40 border-red-500 text-red-200",children:(0,r.jsx)(R,{children:U})}),(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsx)(z,{id:"reg-email",type:"email",placeholder:"Email",value:P,onChange:e=>C(e.target.value),className:"bg-zinc-900/80 border-white/20 placeholder:text-gray-500 text-white"})}),(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsx)(z,{id:"reg-name",type:"text",placeholder:"Full Name",value:I,onChange:e=>T(e.target.value),className:"bg-zinc-900/80 border-white/20 placeholder:text-gray-500 text-white"})}),(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsx)(z,{id:"reg-password",type:"password",placeholder:"Password (min 8 characters)",value:F,onChange:e=>D(e.target.value),className:"bg-zinc-900/80 border-white/20 placeholder:text-gray-500 text-white"})}),(0,r.jsx)("div",{className:"space-y-2",children:(0,r.jsx)(z,{id:"reg-confirm-password",type:"password",placeholder:"Confirm Password",value:H,onChange:e=>L(e.target.value),className:"bg-zinc-900/80 border-white/20 placeholder:text-gray-500 text-white"})}),(0,r.jsx)(M.P.div,{whileHover:{scale:1.03},whileTap:{scale:.97},children:(0,r.jsx)(_,{type:"submit",className:"w-full bg-white text-black hover:bg-gray-200",disabled:B,children:B?"Registering...":"Register"})})]})})]})}),(0,r.jsx)(S,{children:(0,r.jsx)("p",{className:"text-xs text-center w-full text-gray-500",children:"By using Authentic Chat, you agree to our Terms of Service and Privacy Policy"})})]})})]})})}let D=l.forwardRef((e,t)=>{let{className:a,...s}=e;return(0,r.jsx)("textarea",{className:d("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...s})});D.displayName="Textarea";var H=a(3830),L=a(9995),U=a(3524);async function O(e){return new Promise((t,a)=>{let r=new FileReader;r.onload=()=>{try{let e=r.result,a=new Uint8Array(e);t(a)}catch(e){a(e)}},r.onerror=()=>a(Error("Failed to read file")),r.readAsArrayBuffer(e)})}async function B(e){try{return await L.toDataURL(e,{errorCorrectionLevel:"L",margin:2,color:{dark:"#008000",light:"#FFFFFF"}})}catch(e){throw console.error(e),Error("QR Code generation failed")}}function V(e){return e.join(", ")}function W(e){return e.split(",").map(e=>Number.parseInt(e.trim(),10))}function K(){let{user:e}=f(),[t,a]=(0,l.useState)(""),[i,n]=(0,l.useState)(""),[c,d]=(0,l.useState)(""),[o,h]=(0,l.useState)([]),[m,u]=(0,l.useState)(""),[x,g]=(0,l.useState)(""),[p,b]=(0,l.useState)(""),[y,P]=(0,l.useState)(""),[C,I]=(0,l.useState)(""),[z,T]=(0,l.useState)(!1),[F,L]=(0,l.useState)(!1),U=async()=>{if(!t){A.o.error("Please enter a message to encrypt");return}T(!0);try{let e=function(e){let t=Array.from({length:e},()=>Math.floor(2*Math.random())),a=Array.from({length:e},()=>Math.floor(2*Math.random())),r=Array.from({length:e},()=>Math.floor(2*Math.random()));return t.map((e,t)=>a[t]===r[t]?e:Math.floor(2*Math.random()))}(t.length);h(e);let a=V(e);u(a);let r=await B(a);g(r);let s=function(e,t){let a="";for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);a+=String.fromCharCode(s^t[r%t.length])}return H.o4.encode(a)}(t,e);n(s),A.o.success("Message encrypted successfully")}catch(e){console.error("Encryption error:",e),A.o.error("Failed to encrypt message")}finally{T(!1)}},O=(e,t)=>{navigator.clipboard.writeText(e).then(()=>A.o.success("".concat(t," copied to clipboard"))).catch(()=>A.o.error("Failed to copy to clipboard"))},K={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{duration:.5}}};return(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 p-4 bg-black/80 rounded-lg backdrop-blur-md border border-white/10",children:[(0,r.jsx)(M.P.div,{variants:K,initial:"hidden",animate:"visible",children:(0,r.jsxs)(v,{className:"border-white/20 bg-zinc-900/90 text-white shadow-[0_0_15px_rgba(255,255,255,0.05)]",children:[(0,r.jsxs)(w,{className:"pb-2",children:[(0,r.jsx)(j,{className:"text-white",children:"Encrypt Message"}),(0,r.jsx)(N,{className:"text-gray-400",children:"Type a message and encrypt it with simulated quantum key distribution (BB84)"})]}),(0,r.jsx)(k,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsx)(D,{placeholder:"Type your message here...",value:t,onChange:e=>a(e.target.value),className:"min-h-[100px] bg-zinc-900 border-white/20 placeholder:text-gray-500 text-white"}),(0,r.jsx)(M.P.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:(0,r.jsx)(_,{onClick:U,className:"w-full bg-white text-black hover:bg-gray-200",disabled:z,children:z?(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"h-4 w-4 rounded-full border-2 border-t-black border-r-black border-b-transparent border-l-transparent animate-spin"}),"Encrypting..."]}):"Encrypt Message"})})]})})]})}),i&&(0,r.jsx)(M.P.div,{variants:K,initial:"hidden",animate:"visible",transition:{delay:.2},children:(0,r.jsxs)(v,{className:"border-white/20 bg-zinc-900/90 text-white shadow-[0_0_15px_rgba(255,255,255,0.05)]",children:[(0,r.jsxs)(w,{className:"pb-2",children:[(0,r.jsx)(j,{className:"text-white",children:"Encryption Results"}),(0,r.jsx)(N,{className:"text-gray-400",children:"Share these details with your recipient"})]}),(0,r.jsx)(k,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Encrypted Message:"}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"w-full p-2 bg-black rounded-l-md text-sm font-mono overflow-auto break-all max-h-[100px] text-gray-300",children:i}),(0,r.jsx)(M.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,r.jsx)(_,{variant:"outline",className:"rounded-l-none border-white/20 text-white hover:bg-zinc-800",onClick:()=>O(i,"Encrypted message"),children:"Copy"})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Shared Key:"}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"w-full p-2 bg-black rounded-l-md text-sm font-mono overflow-auto break-all max-h-[100px] text-gray-300",children:m}),(0,r.jsx)(M.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,r.jsx)(_,{variant:"outline",className:"rounded-l-none border-white/20 text-white hover:bg-zinc-800",onClick:()=>O(m,"Key"),children:"Copy"})})]})]}),x&&(0,r.jsx)(M.P.div,{className:"flex justify-center mt-4",initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.5},children:(0,r.jsxs)("div",{className:"p-2 bg-white border border-white/20 rounded-md shadow-[0_0_15px_rgba(255,255,255,0.1)]",children:[(0,r.jsx)(s.default,{src:x,alt:"QR Code for Shared Key",width:150,height:150}),(0,r.jsx)("p",{className:"text-center text-xs mt-1 text-black",children:"Scan to get the key"})]})})]})})]})}),(0,r.jsx)(M.P.div,{variants:K,initial:"hidden",animate:"visible",transition:{delay:.1},children:(0,r.jsxs)(v,{className:"border-white/20 bg-zinc-900/90 text-white shadow-[0_0_15px_rgba(255,255,255,0.05)]",children:[(0,r.jsxs)(w,{className:"pb-2",children:[(0,r.jsx)(j,{className:"text-white",children:"Decrypt Message"}),(0,r.jsx)(N,{className:"text-gray-400",children:"Enter an encrypted message and the corresponding key to decrypt it"})]}),(0,r.jsx)(k,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[C&&(0,r.jsx)(E,{variant:"destructive",className:"bg-red-900/40 border-red-500 text-red-200",children:(0,r.jsx)(R,{children:C})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Encrypted Message:"}),(0,r.jsx)(D,{placeholder:"Paste encrypted message here...",value:p,onChange:e=>b(e.target.value),className:"min-h-[80px] bg-zinc-900 border-white/20 placeholder:text-gray-500 text-white"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Decryption Key:"}),(0,r.jsx)(D,{placeholder:"Paste key here...",value:y,onChange:e=>P(e.target.value),className:"min-h-[60px] bg-zinc-900 border-white/20 placeholder:text-gray-500 text-white"})]}),(0,r.jsx)(M.P.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:(0,r.jsx)(_,{onClick:()=>{if(I(""),!p||!y){I("Please enter both encrypted message and key");return}L(!0);try{let e=W(y),t=function(e,t){let a=H.o4.decode(e),r="";for(let e=0;e<a.length;e++){let s=a.charCodeAt(e);r+=String.fromCharCode(s^t[e%t.length])}return r}(p,e);d(t),A.o.success("Message decrypted successfully")}catch(e){console.error("Decryption error:",e),I("Invalid key or encrypted message format")}finally{L(!1)}},className:"w-full bg-white text-black hover:bg-gray-200",disabled:F,children:F?(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"h-4 w-4 rounded-full border-2 border-t-black border-r-black border-b-transparent border-l-transparent animate-spin"}),"Decrypting..."]}):"Decrypt Message"})}),c&&(0,r.jsxs)(M.P.div,{className:"mt-4",initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},transition:{duration:.3},children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Decrypted Message:"}),(0,r.jsx)("div",{className:"p-3 bg-gray-100 border border-white/20 rounded-md",children:(0,r.jsx)("p",{className:"text-black",children:c})})]})]})}),(0,r.jsx)(S,{className:"pt-0",children:(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"The decryption process uses the shared key to reverse the encryption and recover the original message."})})]})})]})}function q(){let{user:e}=f(),t=(0,l.useRef)(null);(0,l.useRef)(null);let[a,i]=(0,l.useState)(null),[n,c]=(0,l.useState)(null),[d,o]=(0,l.useState)(null),[h,m]=(0,l.useState)(null),[u,x]=(0,l.useState)(""),[g,p]=(0,l.useState)(null),[b,y]=(0,l.useState)(""),[P,C]=(0,l.useState)(""),[I,z]=(0,l.useState)(null),[T,F]=(0,l.useState)(""),[D,L]=(0,l.useState)(null),[B,K]=(0,l.useState)(!1),[q,J]=(0,l.useState)(!1),Y=async()=>{if(!a){A.o.error("Please select an image to encrypt");return}J(!0);try{let e=new s.default;e.src=URL.createObjectURL(a),await new Promise(t=>{e.onload=t}),p({width:e.width,height:e.height,type:a.type});let t=await O(a),r=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100;return Array.from({length:e},()=>Math.floor(256*Math.random()))}(100);m(r);let l=V(r);x(l);let i=function(e,t){let a=new Uint8Array(t),r=new Uint8Array(e.length);for(let t=0;t<e.length;t++)r[t]=e[t]^a[t%a.length];let s=U.Ay.deflate(r);return H.o4.fromUint8Array(s)}(t,r);o(i),A.o.success("Image encrypted successfully")}catch(e){console.error("Encryption error:",e),A.o.error("Failed to encrypt image")}finally{J(!1)}},Q=async()=>{if(F(""),!b||!P){F("Please enter both encrypted data and key");return}if(!D){F("Image information is missing. Please include width, height, and image type.");return}K(!0);try{let e=W(P),{width:t,height:a,type:r}=D,s=function(e,t){let a=new Uint8Array(t),r=H.o4.toUint8Array(e),s=U.Ay.inflate(r),l=new Uint8Array(s.length);for(let e=0;e<s.length;e++)l[e]=s[e]^a[e%a.length];return l}(b,e,[a,t,4]),l=new Blob([s],{type:r}),i=URL.createObjectURL(l);z(i),A.o.success("Image decrypted successfully")}catch(e){console.error("Decryption error:",e),F("Invalid key or encrypted data format")}finally{K(!1)}},X=(e,t)=>{navigator.clipboard.writeText(e).then(()=>A.o.success("".concat(t," copied to clipboard"))).catch(()=>A.o.error("Failed to copy to clipboard"))},$=(e,t)=>{if("type"===t)L(a=>a?{...a,[t]:e.target.value}:null);else{let a=Number.parseInt(e.target.value,10);Number.isNaN(a)||L(e=>e?{...e,[t]:a}:{width:0,height:0,type:"image/jpeg"})}};return(0,r.jsxs)("div",{className:"grid grid-cols-1 gap-6 p-4 bg-black/80 rounded-lg backdrop-blur-md border border-white/10",children:[(0,r.jsxs)(v,{className:"border-white/20 bg-zinc-900/90 text-white shadow-[0_0_15px_rgba(255,255,255,0.05)]",children:[(0,r.jsxs)(w,{className:"pb-2",children:[(0,r.jsx)(j,{className:"text-white",children:"Encrypt Image"}),(0,r.jsx)(N,{className:"text-gray-400",children:"Select an image file to encrypt using quantum-inspired algorithms"})]}),(0,r.jsx)(k,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("input",{type:"file",accept:"image/*",onChange:e=>{var t;let a=null===(t=e.target.files)||void 0===t?void 0:t[0];if(a){if(a.size>5242880){A.o.error("File is too large. Please select an image smaller than 5MB.");return}if(!a.type.startsWith("image/")){A.o.error("Please select a valid image file");return}i(a),c(URL.createObjectURL(a)),o(null),m(null),x("")}},ref:t,className:"hidden"}),(0,r.jsx)(_,{variant:"outline",onClick:()=>{var e;return null===(e=t.current)||void 0===e?void 0:e.click()},className:"w-full border-white/20 text-white hover:bg-zinc-800",children:"Select Image"}),a&&(0,r.jsxs)("p",{className:"mt-2 text-sm text-gray-400",children:["Selected: ",a.name," (",Math.round(a.size/1024)," KB)"]})]}),n&&(0,r.jsx)("div",{className:"flex justify-center my-4 border border-white/20 rounded p-2 bg-black/50",children:(0,r.jsx)(s.default,{src:n,alt:"Preview",width:300,height:200,style:{maxWidth:"100%",maxHeight:"300px",objectFit:"contain"}})}),(0,r.jsx)(M.P.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:(0,r.jsx)(_,{onClick:Y,className:"w-full bg-white text-black hover:bg-gray-200",disabled:!a||q,children:q?(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"h-4 w-4 rounded-full border-2 border-t-black border-r-black border-b-transparent border-l-transparent animate-spin"}),"Encrypting..."]}):"Encrypt Image"})})]})})]}),d&&h&&(0,r.jsxs)(v,{className:"border-white/20 bg-zinc-900/90 text-white shadow-[0_0_15px_rgba(255,255,255,0.05)]",children:[(0,r.jsxs)(w,{className:"pb-2",children:[(0,r.jsx)(j,{className:"text-white",children:"Encryption Results"}),(0,r.jsx)(N,{className:"text-gray-400",children:"Share these details with your recipient"})]}),(0,r.jsx)(k,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Encrypted Data:"}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsxs)("div",{className:"w-full p-2 bg-black rounded-l-md text-sm font-mono overflow-auto break-all max-h-[100px] text-gray-300",children:[d.substring(0,100),"..."]}),(0,r.jsx)(M.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,r.jsx)(_,{variant:"outline",className:"rounded-l-none border-white/20 text-white hover:bg-zinc-800",onClick:()=>X(d,"Encrypted data"),children:"Copy"})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Encryption Key:"}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"w-full p-2 bg-black rounded-l-md text-sm font-mono overflow-auto break-all max-h-[100px] text-gray-300",children:u}),(0,r.jsx)(M.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,r.jsx)(_,{variant:"outline",className:"rounded-l-none border-white/20 text-white hover:bg-zinc-800",onClick:()=>X(u,"Key"),children:"Copy"})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Image Information (required for decryption):"}),(0,r.jsx)("div",{className:"flex flex-col space-y-2",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsxs)("div",{className:"w-full p-2 bg-black rounded-l-md text-sm font-mono text-gray-300",children:["Width: ",null==g?void 0:g.width,", Height: ",null==g?void 0:g.height,", Type: ",null==g?void 0:g.type]}),(0,r.jsx)(M.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,r.jsx)(_,{variant:"outline",className:"rounded-l-none border-white/20 text-white hover:bg-zinc-800",onClick:()=>X("Width: ".concat(null==g?void 0:g.width,", Height: ").concat(null==g?void 0:g.height,", Type: ").concat(null==g?void 0:g.type),"Image info"),children:"Copy"})})]})})]})]})})]}),(0,r.jsxs)(v,{className:"border-white/20 bg-zinc-900/90 text-white shadow-[0_0_15px_rgba(255,255,255,0.05)]",children:[(0,r.jsxs)(w,{className:"pb-2",children:[(0,r.jsx)(j,{className:"text-white",children:"Decrypt Image"}),(0,r.jsx)(N,{className:"text-gray-400",children:"Enter encrypted data, key, and image information to decrypt"})]}),(0,r.jsx)(k,{children:(0,r.jsxs)("div",{className:"space-y-4",children:[T&&(0,r.jsx)(E,{variant:"destructive",className:"bg-red-900/40 border-red-500 text-red-200",children:(0,r.jsx)(R,{children:T})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Encrypted Data:"}),(0,r.jsx)("textarea",{placeholder:"Paste encrypted data here...",value:b,onChange:e=>y(e.target.value),className:"w-full p-2 border rounded-md min-h-[100px] bg-zinc-900 border-white/20 placeholder:text-gray-500 text-white"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Decryption Key:"}),(0,r.jsx)("textarea",{placeholder:"Paste key here...",value:P,onChange:e=>C(e.target.value),className:"w-full p-2 border rounded-md min-h-[60px] bg-zinc-900 border-white/20 placeholder:text-gray-500 text-white"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Image Information:"}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs text-gray-500",children:"Width"}),(0,r.jsx)("input",{type:"number",placeholder:"Width",onChange:e=>$(e,"width"),className:"w-full p-2 border rounded-md bg-zinc-900 border-white/20 placeholder:text-gray-500 text-white"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs text-gray-500",children:"Height"}),(0,r.jsx)("input",{type:"number",placeholder:"Height",onChange:e=>$(e,"height"),className:"w-full p-2 border rounded-md bg-zinc-900 border-white/20 placeholder:text-gray-500 text-white"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-xs text-gray-500",children:"Type"}),(0,r.jsx)("input",{type:"text",placeholder:"e.g., image/jpeg",onChange:e=>$(e,"type"),className:"w-full p-2 border rounded-md bg-zinc-900 border-white/20 placeholder:text-gray-500 text-white",defaultValue:"image/jpeg"})]})]})]}),(0,r.jsx)(M.P.div,{whileHover:{scale:1.02},whileTap:{scale:.98},children:(0,r.jsx)(_,{onClick:Q,className:"w-full bg-white text-black hover:bg-gray-200",disabled:B,children:B?(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("span",{className:"h-4 w-4 rounded-full border-2 border-t-black border-r-black border-b-transparent border-l-transparent animate-spin"}),"Decrypting..."]}):"Decrypt Image"})}),I&&(0,r.jsxs)(M.P.div,{className:"mt-4",initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-300 mb-1",children:"Decrypted Image:"}),(0,r.jsx)("div",{className:"flex justify-center my-4 border rounded p-2 bg-white",children:(0,r.jsx)(s.default,{src:I,alt:"Decrypted",width:300,height:200,style:{maxWidth:"100%",maxHeight:"300px",objectFit:"contain"}})}),(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)("a",{href:I,download:"decrypted-image.jpg",className:"text-white hover:text-gray-300 text-sm underline",children:"Download decrypted image"})})]})]})}),(0,r.jsx)(S,{className:"pt-0",children:(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"For best results, use images smaller than 5MB. Larger images may take longer to process."})})]})]})}function J(){let{isLoggedIn:e,user:t,logoutUser:a}=f();return e?(0,r.jsxs)("div",{className:"container mx-auto p-4",children:[(0,r.jsxs)(M.P.header,{className:"flex items-center justify-between mb-6 bg-black/80 p-3 rounded-lg backdrop-blur-sm border border-white/10",initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.5},children:[(0,r.jsxs)(M.P.div,{className:"flex items-center gap-3",whileHover:{scale:1.05},children:[(0,r.jsx)(s.default,{src:"/images/verified-icon.png",alt:"Authentic Chat Logo",width:40,height:40,className:"rounded-full"}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-white",children:"Authentic Chat"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsxs)(M.P.div,{className:"text-sm text-white/90 bg-zinc-800 py-1 px-3 rounded-full",whileHover:{scale:1.05},whileTap:{scale:.95},children:["Welcome, ",(0,r.jsx)("span",{className:"font-semibold text-white",children:null==t?void 0:t.name})]}),(0,r.jsx)(M.P.div,{whileHover:{scale:1.05},whileTap:{scale:.95},children:(0,r.jsx)(_,{variant:"ghost",size:"sm",onClick:a,className:"text-white/80 hover:text-white hover:bg-zinc-800",children:"Logout"})})]})]}),(0,r.jsx)(M.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.5,delay:.2},children:(0,r.jsxs)(o,{defaultValue:"chat",className:"w-full",children:[(0,r.jsxs)(h,{className:"grid w-full grid-cols-2 bg-black/80 backdrop-blur-sm border border-white/10",children:[(0,r.jsx)(m,{value:"chat",className:"data-[state=active]:bg-white data-[state=active]:text-black",children:"Secure Chat"}),(0,r.jsx)(m,{value:"image",className:"data-[state=active]:bg-white data-[state=active]:text-black",children:"Image Encryption"})]}),(0,r.jsx)(u,{value:"chat",children:(0,r.jsx)(K,{})}),(0,r.jsx)(u,{value:"image",children:(0,r.jsx)(q,{})})]})})]}):(0,r.jsx)(F,{})}function Y(){return(0,r.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-zinc-900 to-black overflow-hidden",children:[(0,r.jsxs)("div",{className:"absolute inset-0 overflow-hidden",children:[(0,r.jsx)(M.P.div,{className:"absolute inset-0 bg-cover bg-center opacity-10",style:{backgroundImage:"url(/images/quantum-lock-bg.jpg)"},initial:{scale:1},animate:{scale:1.05,rotate:[0,.5,0,-.5,0]},transition:{scale:{duration:15,repeat:Number.POSITIVE_INFINITY,repeatType:"reverse"},rotate:{duration:20,repeat:Number.POSITIVE_INFINITY,repeatType:"loop"}}}),(0,r.jsxs)("div",{className:"absolute inset-0",children:[Array.from({length:5}).map((e,t)=>(0,r.jsx)(M.P.div,{className:"absolute w-2 h-2 bg-white rounded-full opacity-30",style:{left:"".concat(100*Math.random(),"%"),top:"".concat(100*Math.random(),"%")},animate:{x:[0,100*Math.random()-50],y:[0,100*Math.random()-50],opacity:[.2,.6,.2]},transition:{duration:5+10*Math.random(),repeat:Number.POSITIVE_INFINITY,repeatType:"reverse"}},"particle-blue-".concat(t))),Array.from({length:5}).map((e,t)=>(0,r.jsx)(M.P.div,{className:"absolute w-3 h-3 bg-gray-300 rounded-full opacity-30",style:{left:"".concat(100*Math.random(),"%"),top:"".concat(100*Math.random(),"%")},animate:{x:[0,100*Math.random()-50],y:[0,100*Math.random()-50],opacity:[.1,.4,.1]},transition:{duration:8+7*Math.random(),repeat:Number.POSITIVE_INFINITY,repeatType:"reverse"}},"particle-white-".concat(t)))]})]}),(0,r.jsx)("div",{className:"relative z-10 min-h-screen",children:(0,r.jsx)(y,{children:(0,r.jsx)(J,{})})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[33,814,690,441,587,358],()=>t(3775)),_N_E=e.O()}]);